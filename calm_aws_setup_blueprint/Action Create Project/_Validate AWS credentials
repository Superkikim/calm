# Name: 		Validate AWS credentials
# Type:         Execute
# Script type:	eScript
# Description:	Get IAM details to validate AWS credentials
# Script Type:  Shell

# Script:

import boto3

try:
	iam = boto3.client(
    'sts',
    aws_access_key_id="@@{aws_secret_access_key}@@",
    aws_secret_access_key="@@{aws_access_key_id}@@",
)

except Exception as error:
	print('Connection failed: %s' % (error))
	sys.exit(1)

try:
	summary = iam.get_caller_identity()["Account"]
	pprint(summary)
except Exception as error:
	print('Unable to get summary: %s' % (error))
	sys.exit(1)

exit(0)
